# Sistema de GeraÃ§Ã£o de Provas em PDF

## ğŸ“‹ Resumo Executivo

Sistema web desenvolvido para automatizar o processo de criaÃ§Ã£o, composiÃ§Ã£o e geraÃ§Ã£o de provas acadÃªmicas em formato PDF. A soluÃ§Ã£o permite que professores criem bancos de questÃµes reutilizÃ¡veis, componham provas personalizadas e gerem mÃºltiplas versÃµes embaralhadas com gabaritos separados, otimizando o tempo de preparaÃ§Ã£o de avaliaÃ§Ãµes e reduzindo riscos de cola.

**Objetivo Principal:** Transformar a criaÃ§Ã£o manual de provas em um processo digital, Ã¡gil, seguro e, principalmente, econÃ´mico.

**Impacto Esperado:**
- ReduÃ§Ã£o drÃ¡stica no tempo de formataÃ§Ã£o de provas.
- EliminaÃ§Ã£o de erros manuais na correÃ§Ã£o e composiÃ§Ã£o de gabaritos
- Facilitar reutilizaÃ§Ã£o de questÃµes entre diferentes avaliaÃ§Ãµes
- MitigaÃ§Ã£o de "colas" atravÃ©s da geraÃ§Ã£o automÃ¡tica de versÃµes embaralhadas (A, B, C).

---

## ğŸ¯ O Problema: Sobrecarga Docente e Escassez de Recursos

### Contexto Atual
No cenÃ¡rio da educaÃ§Ã£o pÃºblica, professores e gestores enfrentam um dilema diÃ¡rio: a necessidade de avaliar com qualidade *versus* a escassez de tempo e verba. O processo tradicional de elaboraÃ§Ã£o de provas tornou-se insustentÃ¡vel devido a quatro fatores crÃ­ticos:

### 1. Sobrecarga e SaÃºde do Professor (Burnout)
O tempo gasto com burocracia subtrai horas de planejamento pedagÃ³gico e descanso.
* **Tempo Desproporcional:** Professores gastam mais de 6 horas semanais apenas criando e corrigindo atividades manuais (dados TALIS/Jeduca).
* **Trabalho BraÃ§al:** A formataÃ§Ã£o manual em editores de texto comuns (Word/Docs) Ã© repetitiva, frustrante e consome a energia que deveria estar na sala de aula.
* **Retrabalho:** A dificuldade em reaproveitar questÃµes antigas obriga o docente a "reinventar a roda" a cada bimestre.

### 2. IneficiÃªncia Financeira e Material (O Diferencial de Custo)
Em escolas com orÃ§amentos limitados, a falta de otimizaÃ§Ã£o na impressÃ£o gera desperdÃ­cio de verba pÃºblica.
* **Layouts NÃ£o Otimizados:** Provas formatadas manualmente raramente consideram economia de tinta ou papel, gerando custos atÃ© 50% maiores do que o necessÃ¡rio.
* **Falta de Acessibilidade:** A ausÃªncia de padronizaÃ§Ã£o visual dificulta a leitura para alunos com necessidades especÃ­ficas, exigindo reimpressÃµes ou adaptaÃ§Ãµes manuais demoradas.

### 3. GestÃ£o Descentralizada e Perda de Dados
A falta de um sistema unificado gera desorganizaÃ§Ã£o no acervo intelectual da escola.
* **DispersÃ£o de ConteÃºdo:** QuestÃµes ficam espalhadas em pen-drives, e-mails e papÃ©is soltos, sem categorizaÃ§Ã£o por dificuldade ou disciplina.
* **Risco de Perda:** Sem backup centralizado, anos de trabalho de um professor podem ser perdidos por falhas em computadores pessoais.

### 4. Vulnerabilidade e Erros Manuais
O fator humano no processo repetitivo aumenta a incidÃªncia de falhas.
* **Risco de Fraude (Cola):** A dificuldade em criar mÃºltiplas versÃµes da mesma prova facilita o compartilhamento de respostas entre turmas.
* **InconsistÃªncias:** Erros de gabarito e formataÃ§Ã£o desconfigurada sÃ£o comuns quando o professor estÃ¡ sobrecarregado.

---

### ğŸš€ Por que o "Prova RÃ¡pida" Ã© a SoluÃ§Ã£o?
O projeto nÃ£o Ã© apenas um gerador de provas, mas uma ferramenta de **gestÃ£o de recursos e tempo**. Ao automatizar a diagramaÃ§Ã£o com foco em **economia de tinta/papel** e centralizar o banco de questÃµes, o sistema ataca a raiz do adoecimento docente e oferece viabilidade econÃ´mica para a escola pÃºblica, garantindo avaliaÃ§Ãµes acessÃ­veis, seguras e de baixo custo.

### VisÃ£o Geral
Sistema web fullstack que centraliza todo o ciclo de vida de criaÃ§Ã£o de provas acadÃªmicas, desde a composiÃ§Ã£o do banco de questÃµes atÃ© a geraÃ§Ã£o final de PDFs prontos para impressÃ£o.

### Funcionalidades Principais

#### 1. **GestÃ£o de Banco de QuestÃµes**
- CriaÃ§Ã£o de questÃµes de mÃºltipla escolha com alternativas
- CategorizaÃ§Ã£o por disciplina, dificuldade e tags
- Sistema de questÃµes pÃºblicas (compartilhÃ¡veis) e privadas
- Busca textual e filtros avanÃ§ados
- PrevenÃ§Ã£o de exclusÃ£o de questÃµes jÃ¡ utilizadas em provas

#### 2. **ComposiÃ§Ã£o de Provas**
- Interface intuitiva para seleÃ§Ã£o de questÃµes do banco
- AdiÃ§Ã£o de questÃµes em ordem personalizada
- PrÃ©via da prova antes da finalizaÃ§Ã£o
- DuplicaÃ§Ã£o de provas para reutilizaÃ§Ã£o
- Sistema de rascunho vs. provas finalizadas

#### 3. **GeraÃ§Ã£o de VersÃµes Embaralhadas**
- Algoritmo de embaralhamento baseado em seed reproduzÃ­vel
- GeraÃ§Ã£o de mÃºltiplas versÃµes (A, B, C, etc.)
- Rastreamento de cada versÃ£o gerada
- Garantia de consistÃªncia: mesma seed = mesma ordem

#### 4. **ExportaÃ§Ã£o em PDF**
- GeraÃ§Ã£o de PDF da prova sem respostas marcadas
- GeraÃ§Ã£o de PDF do gabarito com respostas corretas
- Suporte a mÃºltiplas versÃµes embaralhadas
- FormataÃ§Ã£o profissional com cabeÃ§alho e identificaÃ§Ã£o
- Quebra de pÃ¡gina inteligente (questÃµes nÃ£o divididas)

#### 5. **Sistema de AutenticaÃ§Ã£o**
- Cadastro e login de professores
- ProteÃ§Ã£o de rotas com JWT
- Gerenciamento de perfil de usuÃ¡rio

### Como Atende ao Problema


---

## ğŸ› ï¸ Processo de Desenvolvimento

### Metodologias Aplicadas

#### 1. **Design Thinking**
- **Empatia:** Entrevistas com professores para entender dores reais
- **DefiniÃ§Ã£o:** Mapeamento dos fluxos crÃ­ticos (criar questÃ£o â†’ compor prova â†’ gerar PDF)
- **IdeaÃ§Ã£o:** Brainstorming de features essenciais
- **PrototipaÃ§Ã£o:** Desenvolvimento incremental com validaÃ§Ã£o contÃ­nua

#### 2. **Desenvolvimento Ãgil**
- Sprints focadas em entregas funcionais
- PriorizaÃ§Ã£o baseada em valor (MVP primeiro)
- IteraÃ§Ãµes rÃ¡pidas com refatoraÃ§Ã£o contÃ­nua

#### 3. **Arquitetura Modular**
- SeparaÃ§Ã£o clara de responsabilidades por domÃ­nio
- MÃ³dulos independentes e testÃ¡veis
- Facilita manutenÃ§Ã£o e escalabilidade

### Etapas de Desenvolvimento

1. **Fase 1 - FundaÃ§Ã£o (ConcluÃ­da)**
   - Setup do projeto Fastify + TypeScript
   - Sistema de autenticaÃ§Ã£o com JWT
   - CRUD bÃ¡sico de usuÃ¡rios

2. **Fase 2 - Core Features (ConcluÃ­da)**
   - CRUD de questÃµes e alternativas
   - CRUD de exames
   - Sistema de composiÃ§Ã£o de provas
   - LÃ³gica de embaralhamento com seed

3. **Fase 3 - Features AvanÃ§adas (Em Desenvolvimento)**
   - Sistema de geraÃ§Ã£o de PDF
   - Versionamento imutÃ¡vel de provas
   - Listagens com paginaÃ§Ã£o e filtros
   - Sistema de permissÃµes granulares

4. **Fase 4 - Polimento (Planejada)**
   - Frontend responsivo
   - Testes automatizados
   - DocumentaÃ§Ã£o completa da API

---

## ğŸ”§ Detalhes TÃ©cnicos

### Stack TecnolÃ³gica
O projeto foi desenvolvido utilizando uma arquitetura Monorepo com separaÃ§Ã£o clara entre Frontend e Backend, orquestrados via Docker.

#### Backend
- **Runtime:** Node.js
- **Framework:** Fastify (alta performance, TypeScript-first)
- **Linguagem:** TypeScript
- **Banco de Dados:** PostgreSQL 15.
- **ORM/Query:** pg (driver nativo) com query builder manual para otimizaÃ§Ã£o.
- **AutenticaÃ§Ã£o:** @fastify/jwt + bcryptjs
- **ValidaÃ§Ã£o:** Zod (para validaÃ§Ã£o de schemas de entrada e saÃ­da).
- **GeraÃ§Ã£o de PDF:** PDFKit (geraÃ§Ã£o programÃ¡tica de documentos vetoriais leves).

#### Frontend
- **Framework:** React 19 + Vite.
- **Linguagem:** TypeScript.
- **EstilizaÃ§Ã£o:** Material UI (MUI) v7.
- **Estado:** React Hooks + Axios.
- **Interatividade:** @dnd-kit (para arrastar e soltar questÃµes na organizaÃ§Ã£o da prova).
- **FormulÃ¡rios:** React Hook Form + Zod resolver.
- **NotificaÃ§Ãµes:** Sonner

#### Infraestrutura & DevOps
- **ContainerizaÃ§Ã£o:** Docker e Docker Compose.
- **Ambiente:** ConfiguraÃ§Ã£o via variÃ¡veis de ambiente (.env).



#### Arquitetura do Sistema (Backend)
- O Backend segue os princÃ­pios de Clean Architecture e SOLID, visando desacoplamento e testabilidade.

- Controller Layer (src/http/controllers): ResponsÃ¡vel apenas por receber a requisiÃ§Ã£o HTTP, validar dados (Zod) e devolver a resposta. NÃ£o contÃ©m regras de negÃ³cio.

- Use Cases Layer (src/use-cases): ContÃ©m a lÃ³gica de negÃ³cio pura (ex: create-exam, generate-exam-pdf). Ã‰ agnÃ³stico ao framework HTTP.

- Repository Layer (src/repositories): AbstraÃ§Ã£o do acesso ao banco de dados. Permite trocar o banco (ex: de Postgres para In-Memory em testes) sem afetar as regras de negÃ³cio.

- Entities/Models: DefiniÃ§Ãµes de tipos e interfaces do domÃ­nio.

### Estrutura de DiretÃ³rios
```
â”œâ”€â”€ client/                 # Frontend (React + Vite)
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ actions/        # IntegraÃ§Ã£o com API (Axios services)
â”‚   â”‚   â”œâ”€â”€ components/     # Componentes reutilizÃ¡veis (MUI)
â”‚   â”‚   â”œâ”€â”€ contexts/       # Context API (AuthContext, etc)
â”‚   â”‚   â”œâ”€â”€ pages/          # PÃ¡ginas da aplicaÃ§Ã£o (Dashboard, Exam, Question)
|   |   â”œâ”€â”€ lib/            # Axios  
â”‚   â”‚   â””â”€â”€ types/          # Tipagem compartilhada no front
â”‚   â”œâ”€â”€ Dockerfile
â”‚   â””â”€â”€ package.json
â”‚
â”œâ”€â”€ server/                 # Backend (Fastify)
â”‚   â”œâ”€â”€ db/                 # Scripts SQL (Migrations/Seeds)
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ http/
â”‚   â”‚   â”‚   â”œâ”€â”€ controllers/ # Handlers de rotas (Exams, Questions, User)
â”‚   â”‚   â”‚   â””â”€â”€ middleware/  # Auth (JWT) e PermissÃµes
â”‚   â”‚   â”œâ”€â”€ lib/            # ConfiguraÃ§Ãµes (DB connection, etc)
â”‚   â”‚   â”œâ”€â”€ repositories/   # ImplementaÃ§Ã£o PostgreSQL
â”‚   â”‚   â”œâ”€â”€ use-cases/      # Regras de NegÃ³cio (LÃ³gica Core)
â”‚   â”‚   â”‚   â”œâ”€â”€ factories/  # PadrÃ£o Factory para instanciar Use Cases
â”‚   â”‚   â”‚   â””â”€â”€ errors/     # Erros customizados de domÃ­nio
â”‚   â”‚   â”œâ”€â”€ utils/          # Global Error Handler
â”‚   â”‚   â””â”€â”€ app.ts          # Entry point e registro de rotas
â”‚   â”œâ”€â”€ Dockerfile
â”‚   â””â”€â”€ package.json
â”‚
â”œâ”€â”€ docker-compose.yml      # OrquestraÃ§Ã£o dos serviÃ§os
â””â”€â”€ README.MD
```

### Modelo de Dados
O banco PostgreSQL foi estruturado com as seguintes entidades principais:

- Users: Professores/Administradores.

- Questions: Enunciado e metadados.

- Alternatives: OpÃ§Ãµes de resposta vinculadas Ã s questÃµes.

- Exams: O cabeÃ§alho da prova e configuraÃ§Ãµes.

- ExamQuestions: Tabela pivÃ´ que vincula questÃµes Ã  prova, controlando a ordem e pontuaÃ§Ã£o.


### Principais Endpoints da API

#### AutenticaÃ§Ã£o
```

```

#### QuestÃµes
```

```

#### Exames
```

```

### Algoritmo de Embaralhamento
```

```

**CaracterÃ­sticas:**
- DeterminÃ­stico: mesma seed gera sempre a mesma ordem
- Permite reproduzir versÃµes especÃ­ficas
- Baseado em algoritmo Fisher-Yates

---


### PrÃ©-requisitos

- Docker e Docker Compose instalados

### Passo a Passo

1. **Clone o repositÃ³rio:**
   ```bash
   git clone <url-do-repositorio>
   cd hackathon-prova-rapida
   ```

2. **Configure as variÃ¡veis de ambiente:**
   
   Crie um arquivo `.env` na raiz (baseado nos exemplos das pastas client e server) ou utilize os valores padrÃ£o do `docker-compose.yml`.

3. **Suba os containers:**
   ```bash
   docker-compose up --build
   ```

4. **Acesse a aplicaÃ§Ã£o:**
   - **Frontend:** http://localhost:5173
   - **Backend:** http://localhost:3000
   - **Banco de Dados:** Porta 5433 (externa)

---

## ğŸ“¡ Principais Endpoints (API)

| MÃ©todo | Rota | DescriÃ§Ã£o |
|--------|------|-----------|
| POST | `/users` | Cadastro de novo professor |
| POST | `/sessions` | AutenticaÃ§Ã£o (Login) |
| GET | `/questions` | Listagem de questÃµes com filtros |
| POST | `/questions` | CriaÃ§Ã£o de nova questÃ£o |
| POST | `/exams` | CriaÃ§Ã£o de prova (rascunho) |
| PATCH | `/exams/:id/reorder` | ReordenaÃ§Ã£o de questÃµes (Drag & Drop) |
| GET | `/exams/:id/pdf` | GeraÃ§Ã£o do PDF da prova |
| GET | `/exams/:id/answer-key` | GeraÃ§Ã£o do PDF do gabarito |

---

## ğŸ“… Processo de Desenvolvimento & Metodologia

O desenvolvimento seguiu o cronograma do Hackathon, focado na entrega de um **MVP (Minimum Viable Product)** funcional.

1. **Discovery & Design Thinking:** Entendimento da dor do usuÃ¡rio (professor) e definiÃ§Ã£o dos requisitos de economia de papel e facilidade de uso.
2. **Modelagem:** DefiniÃ§Ã£o do Schema do banco de dados para suportar mÃºltiplas versÃµes de prova.
3. **Backend Development:** ImplementaÃ§Ã£o da API RESTful com TDD mental (focando nos casos de uso antes dos controladores).
4. **Frontend Integration:** ConstruÃ§Ã£o da interface com Material UI para agilidade no desenvolvimento.
5. **Refinamento:** ImplementaÃ§Ã£o da lÃ³gica de embaralhamento de questÃµes (Shuffle) e geraÃ§Ã£o de PDFs com pdfkit.

---

## ğŸ”® PrÃ³ximos Passos (Roadmap)

- [ ] **Modo Eco:** Algoritmo para reduzir ainda mais o espaÃ§o em branco nos PDFs
- [ ] **Banco PÃºblico:** Permitir que professores compartilhem questÃµes entre si
- [ ] **Dashboard:** EstatÃ­sticas de desempenho dos alunos baseadas nos gabaritos
- [ ] **CI/CD:** Pipeline automatizado para deploy na Vercel/Render

---

**Desenvolvido pelo Grupo 57 - FIAP Postech**

## ğŸ“š Aprendizados e PrÃ³ximos Passos

### LiÃ§Ãµes Aprendidas

#### âœ… O que funcionou bem

1. **Arquitetura Modular**
   - SeparaÃ§Ã£o por domÃ­nios facilitou manutenÃ§Ã£o e testes
   - Escalabilidade natural para adicionar novos mÃ³dulos
   - CÃ³digo mais legÃ­vel e organizado

2. **TypeScript + Fastify**
   - Type safety reduziu bugs em produÃ§Ã£o
   - Performance superior comparado a Express
   - ValidaÃ§Ã£o automÃ¡tica de schemas

#### âš ï¸ Desafios Enfrentados

1. **Relacionamentos Complexos**
   - Tabela pivot `exam_questions` com ordenaÃ§Ã£o foi mais complexa que esperado
   - SoluÃ§Ã£o: Ã­ndices compostos e validaÃ§Ãµes no service layer

2. **PermissÃµes Granulares**
   - Definir quem pode editar/deletar questÃµes pÃºblicas gerou discussÃµes
   - NecessÃ¡rio revisar modelo de permissÃµes antes de escalar

3. **GeraÃ§Ã£o de PDF**

### PrÃ³ximos Passos

#### Curto Prazo (1-2 semanas)
- [ ] Implementar sistema completo de geraÃ§Ã£o de PDF

#### MÃ©dio Prazo (1-2 meses)
- [ ] Desenvolver frontend completo em React


#### Longo Prazo (3-6 meses)
- [ ] Dashboard com estatÃ­sticas de uso de questÃµes


### Melhorias TÃ©cnicas Planejadas

1. **Performance**
   - Implementar cache Redis para questÃµes pÃºblicas
   - Otimizar queries com eager loading
   - CDN para servir PDFs gerados

2. **SeguranÃ§a**
   - Rate limiting mais robusto
   - Criptografia de dados sensÃ­veis
   - Auditoria de aÃ§Ãµes crÃ­ticas (logs)

3. **DevOps**
   - CI/CD com GitHub Actions
   - Docker para padronizaÃ§Ã£o de ambiente
   - Deploy automatizado (Vercel)

4. **Qualidade de CÃ³digo**
   - Cobertura de testes >80%
   - Linting automÃ¡tico (ESLint + Prettier)
   - Pre-commit hooks (Husky)
   - DocumentaÃ§Ã£o automÃ¡tica com JSDoc

---

**Desenvolvido pelo Grupo 57 - FIAP Postech**